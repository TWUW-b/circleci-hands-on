version: 2
jobs:
  build:
    working_directory: ~/workspace
    docker:
      - image: node:9.4.0 #イメージを選択
    steps:
      - checkout 
      - restore_cache:
        key: yarn-{{.Branch}}-{{checksum"yarn.lock"}}
      - run:
        name: pwd
        command: pwd
      - run:
          name: Install dependencies #名前を設定
          command: yarn   #実行するコマンド
      - run:
          name: Build
          command: yarn build
      - run:
          name: Check dist
          command: ls -la dist
      - save_cache:
        key: yarn-{{.Branch}}--{{checksum "yarn.lock"}}
        paths:
          - ~/workspace/node_modules

